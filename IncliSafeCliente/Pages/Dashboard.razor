
@page "/dashboard"
@inject HttpClient Http

<MudContainer MaxWidth="MaxWidth.Large" Class="mt-4">
    <MudGrid>
        <MudItem xs="12" sm="6" md="3">
            <MudPaper Class="d-flex flex-column pa-4" Style="height: 150px;">
                <MudText Typo="Typo.h6">Total Veh√≠culos</MudText>
                <MudText Typo="Typo.h3" Class="flex-grow-1 d-flex align-center justify-center">
                    @totalVehiculos
                </MudText>
            </MudPaper>
        </MudItem>
        <MudItem xs="12" sm="6" md="3">
            <MudPaper Class="d-flex flex-column pa-4" Style="height: 150px;">
                <MudText Typo="Typo.h6">Inspecciones Pendientes</MudText>
                <MudText Typo="Typo.h3" Class="flex-grow-1 d-flex align-center justify-center">
                    @inspeccionesPendientes
                </MudText>
            </MudPaper>
        </MudItem>
    </MudGrid>
</MudContainer>

@code {
    private int totalVehiculos;
    private int inspeccionesPendientes;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            var stats = await Http.GetFromJsonAsync<DashboardStats>("api/dashboard/stats");
            if (stats != null)
            {
                totalVehiculos = stats.TotalVehiculos;
                inspeccionesPendientes = stats.InspeccionesPendientes;
            }
        }
        catch (Exception)
        {
            // Manejar error
        }
    }

    private class DashboardStats
    {
        public int TotalVehiculos { get; set; }
        public int InspeccionesPendientes { get; set; }
    }
}
